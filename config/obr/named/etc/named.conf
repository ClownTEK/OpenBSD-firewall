include "/etc/rndc.key";

controls {
  inet 127.0.0.1 port 953
  allow { 127.0.0.1; }
  keys { "rndc-key"; };
};

acl "BuddyNsTransferDns" {
  173.244.206.25;
  173.244.206.26;
  88.198.106.11;
};

acl "BuddyNsQueryDns" {
  173.244.206.25;
  173.244.206.26;
  88.198.106.11;
};

acl "MyClients" {
  192.168.1.0/24;
  127.0.0.1;
  ::1;
};

options {
  version "";

  directory "/";

  interface-interval 0;

  listen-on { any; };
  listen-on-v6 { none; };

  empty-zones-enable yes;

  allow-query {
    MyClients;
    BuddyNsQueryDns;
  };

  allow-transfer {
    BuddyNsTransferDns;
  };

  allow-recursion { MyClients; };

  forwarders { 194.246.118.118; 212.25.28.55; };
};

logging {
  category lame-servers { null; };
};

view "internal" {
  match-clients { MyClients; };

  zone "." {
    type hint;
    file "etc/root.hint";
  }; 

  zone "localhost" {
    type master;
    file "standard/localhost";
    allow-transfer { localhost; };
  };

  zone "127.in-addr.arpa" {
    type master;
    file "standard/loopback";
    allow-transfer { localhost; };
  };

  zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa" {
    type master;
    file "standard/loopback6.arpa";
    allow-transfer { localhost; };
  };

  # TODO: Don't use!! TLDs can be anything nowadays..
  zone "lan" {
    type master;
    file "master/lan";
  };

  zone "1.168.192.in-addr.arpa" {
    type master;
    file "master/1.168.192.in-addr";
  };

  zone "andreasbaumann.cc" {
    type master;
    file "master/andreasbaumann.cc-internal";
  };

  zone "bikecentum.com" {
    type master;
    file "master/bikecentum.com-internal";
  };

  zone "maschezuoz.ch" {
    type master;
    file "master/maschezuoz.ch-internal";
  };

  zone "project-strus.net" {
    type master;
    file "master/project-strus.net-internal";
  };

};

view "external" {
  match-clients { BuddyNsQueryDns; };

  zone "andreasbaumann.cc" {
    type master;
    file "master/andreasbaumann.cc-external";
  };

  zone "bikecentum.com" {
    type master;
    file "master/bikecentum.com-external";
  };

  zone "maschezuoz.ch" {
    type master;
    file "master/maschezuoz.ch-external";
  };

};
